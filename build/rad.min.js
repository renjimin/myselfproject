!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("underscore"),require("backbone")):"function"==typeof define&&define.amd?define(["underscore","backbone"],t):"object"==typeof exports?exports.RAD=t(require("underscore"),require("backbone")):e.RAD=t(e._,e.Backbone)}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(1);n(2);var i={};i.core=n(13),i.utils=n(26),i.template=n(10),i.View=n(14),i.Module=n(24),r.extend(i,n(6)),e.exports=i},function(t,n){t.exports=e},function(e,t,n){n(3),n(23),n(25)},function(e,t,n){"use strict";function r(e){o.elementOpenStart(e.tagName||"div",e.key),s.each(s.omit(e,d),function(e,t){o.attr(t,e)});var t=o.elementOpenEnd();return void 0===t.__firstRender&&(t.__firstRender=!0),t}function i(e){var t=o.elementClose(e.tagName);return t.__firstRender=!1,t}function a(e,t){return{rootEl:e,attrs:t,children:u.toArray(e.children),keyMap:s.clone(u.getNodeData(e).keyMap)||{},keysRendered:{},keysToShow:{},position:0,firstRender:e.__firstRender,applyAnimation:!e.__firstRender||"none"!==t.initialAnimation}}var s=n(1),o=n(4),u=(n(10),n(15)),l=n(16),c=n(11),p=n(22),d=["name","tagName","key","initialAnimation","animationName","animationEnter","animationLeave","enterTimeout","leaveTimeout","enterClass","leaveClass","activeClass","delay","groupName"];c.registerHelper("i-transition",function(e,t){e.name&&console.warn("Warning: `name` is deprecated attribute for transitionGroup, use `animationName` instead");var n=r(e),s=a(n,e);l.start(s),t(),l.stop(s),i(e);var o=p.create(e);l.doTransition(s,o),p.run(o.name)})},function(e,t,n){"use strict";function r(e,t,n){e[t]=!!n}function i(e,t){var n=t[0],r=Array.prototype.slice.call(t,1);l.events.trigger.apply(l.events,[e+":before"].concat(r));var i=n.apply(null,r);return l.events.trigger.apply(l.events,[e+":after"].concat(r)),i}function a(e,t,n,r){u(d.PATCH_START,t),e.call(null,t,n,r),u(d.PATCH_END,t)}var s=n(1),o=n(5),u=n(6).publish,l=n(7),c=l.attributes,p=n(8),d=n(9).Events;c.checked=r,c.disabled=r,c.readOnly=r,c.className=c["class"]=function(e,t,n){n=n||"",p.removeClass(e,e.__className),p.addClass(e,n),e.__className=n},l.events=s.clone(o.Events),l.elementOpen=s.wrap(l.elementOpen,function(){return i("elementOpen",arguments)}),l.elementClose=s.wrap(l.elementClose,function(){return i("elementClose",arguments)}),l.elementOpenStart=s.wrap(l.elementOpenStart,function(){return i("elementOpenStart",arguments)}),l.elementOpenEnd=s.wrap(l.elementOpenEnd,function(){return i("elementOpenEnd",arguments)}),l.elementVoid=function(e){return l.elementOpen.apply(null,arguments),l.elementClose(e)},l.patch=l.patchInner=s.wrap(l.patchInner,a),l.patchOuter=s.wrap(l.patchOuter,a),e.exports=l},function(e,n){e.exports=t},function(e,t,n){"use strict";var r=n(1),i=n(5),a=r.clone(i.Events);e.exports={publish:function(){a.trigger.apply(a,arguments)},subscribe:function(e,t,n){a.on(e,t,n)},unsubscribe:function(e,t,n){a.off(e,t,n)}}},function(e,t,n){"use strict";function r(e,t){this.attrs=u(),this.attrsArr=[],this.newAttrs=u(),this.key=t,this.keyMap=null,this.keyMapValid=!0,this.nodeName=e,this.text=null}function i(){this.created=A.nodesCreated&&[],this.deleted=A.nodesDeleted&&[]}var a=Object.prototype.hasOwnProperty,s=Object.create,o=function(e,t){return a.call(e,t)},u=function(){return s(null)},l=function(e,t,n){var i=new r(t,n);return e.__incrementalDOMData=i,i},c=function(e){var t=e.__incrementalDOMData;if(!t){var n=e.nodeName.toLowerCase(),r=null;e instanceof Element&&(r=e.getAttribute("key")),t=l(e,n,r)}return t},p={"default":"__default",placeholder:"__placeholder"},d=function(e){return 0===e.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===e.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":void 0},h=function(e,t,n){if(null==n)e.removeAttribute(t);else{var r=d(t);r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}},f=function(e,t,n){e[t]=n},v=function(e,t,n){if("string"==typeof n)e.style.cssText=n;else{e.style.cssText="";var r=e.style,i=n;for(var a in i)o(i,a)&&(r[a]=i[a])}},m=function(e,t,n){var r=typeof n;"object"===r||"function"===r?f(e,t,n):h(e,t,n)},g=function(e,t,n){var r=c(e),i=r.attrs;if(i[t]!==n){var a=_[t]||_[p["default"]];a(e,t,n),i[t]=n}},_=u();_[p["default"]]=m,_[p.placeholder]=function(){},_.style=v;var y=function(e,t){return"svg"===e?"http://www.w3.org/2000/svg":"foreignObject"===c(t).nodeName?null:t.namespaceURI},b=function(e,t,n,r,i){var a=y(n,t),s=void 0;if(s=a?e.createElementNS(a,n):e.createElement(n),l(s,n,r),i)for(var o=0;o<i.length;o+=2)g(s,i[o],i[o+1]);return s},x=function(e){var t=e.createTextNode("");return l(t,"#text",null),t},E=function(e){for(var t=u(),n=e.firstElementChild;n;){var r=c(n).key;r&&(t[r]=n),n=n.nextElementSibling}return t},T=function(e){var t=c(e);return t.keyMap||(t.keyMap=E(e)),t.keyMap},C=function(e,t){return t?T(e)[t]:null},w=function(e,t,n){T(e)[t]=n},A={nodesCreated:null,nodesDeleted:null};i.prototype.markCreated=function(e){this.created&&this.created.push(e)},i.prototype.markDeleted=function(e){this.deleted&&this.deleted.push(e)},i.prototype.notifyChanges=function(){this.created&&this.created.length>0&&A.nodesCreated(this.created),this.deleted&&this.deleted.length>0&&A.nodesDeleted(this.deleted)};var D=null,k=null,O=null,N=null,I=null,R=function(e){var t=function(t,n,r){var a=D,s=N,o=I,u=k,l=O;D=new i,N=t,I=t.ownerDocument,O=t.parentNode,e(t,n,r),D.notifyChanges(),D=a,N=s,I=o,k=u,O=l};return t},S=R(function(e,t,n){k=e,L(),t(n),W()}),V=R(function(e,t,n){k={nextSibling:e},t(n)}),P=function(e,t){var n=c(k);return e===n.nodeName&&t==n.key},M=function(e,t,n){if(!k||!P(e,t)){var r=void 0;t&&(r=C(O,t)),r||(r="#text"===e?x(I):b(I,O,e,t,n),t&&w(O,t,r),D.markCreated(r)),k&&c(k).key?(O.replaceChild(r,k),c(O).keyMapValid=!1):O.insertBefore(r,k),k=r}},j=function(){var e=O,t=c(e),n=t.keyMap,r=t.keyMapValid,i=e.lastChild,a=void 0;if(!(i===k&&r||t.attrs[p.placeholder]&&e!==N)){for(;i!==k;)e.removeChild(i),D.markDeleted(i),a=c(i).key,a&&delete n[a],i=e.lastChild;if(!r){for(a in n)i=n[a],i.parentNode!==e&&(D.markDeleted(i),delete n[a]);t.keyMapValid=!0}}},L=function(){O=k,k=null},H=function(){k=k?k.nextSibling:O.firstChild},W=function(){j(),k=O,O=O.parentNode},q=function(e,t,n){return H(),M(e,t,n),L(),O},B=function(){return W(),k},K=function(){return H(),M("#text",null,null),k},$=function(){return O},z=function(){k=O.lastChild},F=3,G=[],J=function(e,t,n,r){for(var i=q(e,t,n),a=c(i),s=a.attrsArr,o=a.newAttrs,u=!1,l=F,p=0;l<arguments.length;l+=1,p+=1)if(s[p]!==arguments[l]){u=!0;break}for(;l<arguments.length;l+=1,p+=1)s[p]=arguments[l];if(p<s.length&&(u=!0,s.length=p),u){for(l=F;l<arguments.length;l+=2)o[arguments[l]]=arguments[l+1];for(var d in o)g(i,d,o[d]),o[d]=void 0}return i},U=function(e,t,n){G[0]=e,G[1]=t,G[2]=n},Y=function(e,t){G.push(e,t)},X=function(){var e=J.apply(null,G);return G.length=0,e},Q=function(e){var t=B();return t},Z=function(e,t,n,r){return J.apply(null,arguments),Q(e)},ee=function(e,t,n,r){return J.apply(null,arguments),z(),Q(e)},te=function(e,t){var n=K(),r=c(n);if(r.text!==e){r.text=e;for(var i=e,a=1;a<arguments.length;a+=1){var s=arguments[a];i=s(i)}n.data=i}return n};t.patch=S,t.patchInner=S,t.patchOuter=V,t.currentElement=$,t.skip=z,t.elementVoid=Z,t.elementOpenStart=U,t.elementOpenEnd=X,t.elementOpen=J,t.elementClose=Q,t.elementPlaceholder=ee,t.text=te,t.attr=Y,t.symbols=p,t.attributes=_,t.applyAttr=h,t.applyProp=f,t.notifications=A},function(e,t){"use strict";function n(e,t){return e.className?e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")):!1}function r(e,t){var r=t?t.split(" "):[];r.forEach(function(t){n(e,t)||(e.className=e.className?e.className+" "+t:t)},this)}function i(e,t){var r=t?t.split(" "):[];r.forEach(function(t){n(e,t)&&(e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(?=\\s|$)"),""))},this)}e.exports.hasClass=n,e.exports.addClass=r,e.exports.removeClass=i},function(e,t){var n={Attributes:{ID:"view-id",ROLE:"data-role"},ViewOptions:["key","propsModel","model","collection","el","id","attributes","className","tagName","events"],Events:{REGISTER:"register",UNREGISTER:"unregister",ATTACH:"attach",DETACH:"detach",NODE_ATTACHED:"nodeAdded",NODE_REMOVED:"nodeRemoved",PATCH_START:"patchStart",PATCH_END:"patchEnd"}};e.exports=n},function(e,t,n){"use strict";function r(e){var t=a.compile(e,null);return function(e,n){return t.call(this,e,i,a.helpers,n,s)}}var i=n(7),a=(n(1),n(11)),s=n(12);e.exports=r},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r=n(1),i=n(2),a=n(3),s=n(5),o=n(6).createWrapper(),u=new s(o),l=new a(u),c={},p={compile:function(e,t,n,r){return u.reset(),u.set(Object.keys(c),n?Object.keys(n):[],r),o.set(t,c,null,e),l.parseComplete(i(e))},options:function(e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},registerHelper:function(e,t){c[e]=t},unregisterHelper:function(e){delete c[e]}};Object.defineProperty(p,"helpers",{get:function(){return c},set:function(){}}),e.exports=p},function(e,t){var n={BREAK_LINE:/(\r\n|\n|\r)\s{0,}/gm,template:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},order:["interpolate","escape","evaluate"],evaluate:{name:"script",open:"<script>",close:"</script>"},accessory:{open:"{%",close:"%}"},escape:/(&amp;|&lt;|&gt;|&quot;)/g,MAP:{"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},emptyString:!0,skipAttr:"skip",staticKey:"key",staticArray:"static-array",nonStaticAttributes:["id","name","ref"],binderPre:"::",helperPre:"i-",parameterName:"data",parentParameterName:"parent",renderContentFnName:"content",textSaveTags:["pre","code"],voidRequireTags:["input","area","base","br","col","command","embed","hr","img","keygen","link","meta","param","source","track","wbr"],debug:!1};e.exports=n},function(e,t,n){function r(e,t){return a.accessory.open+t+a.accessory.close}function i(e){for(var t=e,n=0;n<a.order.length;n++)t=s[a.order[n]](t);return t}var a=n(1),s={evaluate:function(e){return e.replace(a.template.evaluate,function(e,t){return a.evaluate.open+t.replace(a.BREAK_LINE," ").trim()+a.evaluate.close})},interpolate:function(e){return e.replace(a.template.interpolate,r)},escape:function(e){return e.replace(a.template.escape,r)}};e.exports=i},function(e,t,n){function r(e){this._builder=e,this.reset()}var i=n(4);r.prototype.reset=function(){this._state={mode:i.Text,pos:0,data:null,pendingText:null,pendingWrite:null,lastTag:null,isScript:!1,needData:!1,output:[],done:!1},this._builder.reset()},r.prototype.parseChunk=function(e){for(this._state.needData=!1,this._state.data=null!==this._state.data?this._state.data.substr(this.pos)+e:e;this._state.pos<this._state.data.length&&!this._state.needData;)this._parse(this._state)},r.prototype.parseComplete=function(e){return this.reset(),this.parseChunk(e),this.done()},r.prototype.done=function(){return this._state.done=!0,this._parse(this._state),this._flushWrite(),this._builder.done()},r.prototype._parse=function(){switch(this._state.mode){case i.Text:return this._parseText(this._state);case i.Tag:return this._parseTag(this._state);case i.Attr:return this._parseAttr(this._state);case i.CData:return this._parseCData(this._state);case i.Doctype:return this._parseDoctype(this._state);case i.Comment:return this._parseComment(this._state)}},r.prototype._writePending=function(e){this._state.pendingWrite||(this._state.pendingWrite=[]),this._state.pendingWrite.push(e)},r.prototype._flushWrite=function(){if(this._state.pendingWrite){for(var e=0,t=this._state.pendingWrite.length;t>e;e++){var n=this._state.pendingWrite[e];this._builder.write(n)}this._state.pendingWrite=null}},r.prototype._write=function(e){this._flushWrite(),this._builder.write(e)},r._re_parseText_scriptClose=/<\s*\/\s*script/gi,r.prototype._parseText=function(){var e,t=this._state;t.isScript?(r._re_parseText_scriptClose.lastIndex=t.pos,e=r._re_parseText_scriptClose.exec(t.data),e=e?e.index:-1):e=t.data.indexOf("<",t.pos);var n=-1===e?t.data.substring(t.pos,t.data.length):t.data.substring(t.pos,e);if(0>e&&t.done&&(e=t.data.length),0>e){if(t.isScript)return void(t.needData=!0);t.pendingText||(t.pendingText=[]),t.pendingText.push(t.data.substring(t.pos,t.data.length)),t.pos=t.data.length}else t.pendingText?(t.pendingText.push(t.data.substring(t.pos,e)),n=t.pendingText.join(""),t.pendingText=null):n=t.data.substring(t.pos,e),""!==n&&this._write({type:i.Text,data:n}),t.pos=e+1,t.mode=i.Tag},r.re_parseTag=/\s*(\/?)\s*([^\s>\/]+)(\s*)\??(>?)/g,r.prototype._parseTag=function(){var e=this._state;r.re_parseTag.lastIndex=e.pos;var t=r.re_parseTag.exec(e.data);if(t){if(!t[1]&&"!--"===t[2].substr(0,3))return e.mode=i.Comment,void(e.pos+=3);if(!t[1]&&"![CDATA["===t[2].substr(0,8))return e.mode=i.CData,void(e.pos+=8);if(!t[1]&&"!DOCTYPE"===t[2].substr(0,8))return e.mode=i.Doctype,void(e.pos+=8);if(!e.done&&e.pos+t[0].length===e.data.length)return void(e.needData=!0);var n;">"===t[4]?(e.mode=i.Text,n=t[0].substr(0,t[0].length-1)):(e.mode=i.Attr,n=t[0]),e.pos+=t[0].length;var a={type:i.Tag,name:t[1]+t[2],raw:n,position:r.re_parseTag.lastIndex};e.mode===i.Attr&&(e.lastTag=a),"script"===a.name.toLowerCase()?e.isScript=!0:"/script"===a.name.toLowerCase()&&(e.isScript=!1),e.mode===i.Attr?this._writePending(a):this._write(a)}else e.needData=!0},r.re_parseAttr_findName=/\s*([^=<>\s'"\/]+)\s*/g,r.prototype._parseAttr_findName=function(){r.re_parseAttr_findName.lastIndex=this._state.pos;var e=r.re_parseAttr_findName.exec(this._state.data);return e?this._state.pos+e[0].length!==r.re_parseAttr_findName.lastIndex?null:{match:e[0],name:e[1]}:null},r.re_parseAttr_findValue=/\s*=\s*(?:'([^']*)'|"([^"]*)"|([^'"\s\/>]+))\s*/g,r.re_parseAttr_findValue_last=/\s*=\s*['"]?(.*)$/g,r.prototype._parseAttr_findValue=function(){var e=this._state;r.re_parseAttr_findValue.lastIndex=e.pos;var t=r.re_parseAttr_findValue.exec(e.data);return t?e.pos+t[0].length!==r.re_parseAttr_findValue.lastIndex?null:{match:t[0],value:t[1]||t[2]||t[3]}:e.done?(r.re_parseAttr_findValue_last.lastIndex=e.pos,t=r.re_parseAttr_findValue_last.exec(e.data),t?{match:t[0],value:""!==t[1]?t[1]:null}:null):null},r.re_parseAttr_splitValue=/\s*=\s*['"]?/g,r.re_parseAttr_selfClose=/(\s*\/\s*)(>?)/g,r.prototype._parseAttr=function(){var e=this._state,t=this._parseAttr_findName(e);if(t&&"?"!==t.name){if(!e.done&&e.pos+t.match.length===e.data.length)return e.needData=!0,null;e.pos+=t.match.length;var n=this._parseAttr_findValue(e);if(n){if(!e.done&&e.pos+n.match.length===e.data.length)return e.needData=!0,void(e.pos-=t.match.length);e.pos+=n.match.length}else if(e.data.indexOf(" ",e.pos-1))n={match:"",value:null};else{if(r.re_parseAttr_splitValue.lastIndex=e.pos,r.re_parseAttr_splitValue.exec(e.data))return e.needData=!0,void(e.pos-=t.match.length);n={match:"",value:null}}e.lastTag.raw+=t.match+n.match,this._writePending({type:i.Attr,name:t.name,data:n.value})}else{r.re_parseAttr_selfClose.lastIndex=e.pos;var a=r.re_parseAttr_selfClose.exec(e.data);if(a&&a.index===e.pos){if(!e.done&&!a[2]&&e.pos+a[0].length===e.data.length)return void(e.needData=!0);e.lastTag.raw+=a[1],this._write({type:i.Tag,name:"/"+e.lastTag.name,raw:null}),e.pos+=a[1].length}var s=e.data.indexOf(">",e.pos);if(0>s){if(e.done)return e.lastTag.raw+=e.data.substr(e.pos),void(e.pos=e.data.length);e.needData=!0}else e.pos=s+1,e.mode=i.Text}},r.re_parseCData_findEnding=/\]{1,2}$/,r.prototype._parseCData=function(){var e=this._state,t=e.data.indexOf("]]>",e.pos);if(0>t&&e.done&&(t=e.data.length),0>t){r.re_parseCData_findEnding.lastIndex=e.pos;var n=r.re_parseCData_findEnding.exec(e.data);if(n)return void(e.needData=!0);e.pendingText||(e.pendingText=[]),e.pendingText.push(e.data.substr(e.pos,e.data.length)),e.pos=e.data.length,e.needData=!0}else{var a;e.pendingText?(e.pendingText.push(e.data.substring(e.pos,t)),a=e.pendingText.join(""),e.pendingText=null):a=e.data.substring(e.pos,t),this._write({type:i.CData,data:a}),e.mode=i.Text,e.pos=t+3}},r.prototype._parseDoctype=function(){var e=this._state,t=e.data.indexOf(">",e.pos);if(0>t&&e.done&&(t=e.data.length),0>t)r.re_parseCData_findEnding.lastIndex=e.pos,e.pendingText||(e.pendingText=[]),e.pendingText.push(e.data.substr(e.pos,e.data.length)),e.pos=e.data.length,e.needData=!0;else{var n;e.pendingText?(e.pendingText.push(e.data.substring(e.pos,t)),n=e.pendingText.join(""),e.pendingText=null):n=e.data.substring(e.pos,t),this._write({type:i.Doctype,data:n}),e.mode=i.Text,e.pos=t+1}},r.re_parseComment_findEnding=/\-{1,2}$/,r.prototype._parseComment=function(){var e=this._state,t=e.data.indexOf("-->",e.pos);if(0>t&&e.done&&(t=e.data.length),0>t){r.re_parseComment_findEnding.lastIndex=e.pos;var n=r.re_parseComment_findEnding.exec(e.data);if(n)return void(e.needData=!0);e.pendingText||(e.pendingText=[]),e.pendingText.push(e.data.substr(e.pos,e.data.length)),e.pos=e.data.length,e.needData=!0}else{var a;e.pendingText?(e.pendingText.push(e.data.substring(e.pos,t)),a=e.pendingText.join(""),e.pendingText=null):a=e.data.substring(e.pos,t),this._write({type:i.Comment,data:a}),e.mode=i.Text,e.pos=t+3}},e.exports=r},function(e,t){var n={Text:"text",Tag:"tag",Attr:"attr",CData:"cdata",Doctype:"doctype",Comment:"comment"};e.exports=n},function(e,t,n){function r(){return 0===P.level}function i(){for(var e=new Array(12),t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefgijklmnopqrstuvwxyz",n=0;12>n;n++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join(I)}function a(e,t){var n,r,i,a=new RegExp(A.accessory.open+"|"+A.accessory.close,"g"),s=!0;return n=void 0!==e?e.split(a).map(function(e,n){return r="",i="",n%2?(s=!1,e=e.trim(),A.emptyString&&!t?(-1!==e.indexOf(" ")&&(r="(",i=")")," + ("+r+e+i+' === undefined ? "" : '+r+e+i+") + "):" + "+e+" + "):JSON.stringify(e)}).join(""):'""',n=n.replace(/^"" \+ | \+ ""$/g,"").replace(/ \+ "" \+ /g," + "),{value:n,isStatic:s}}function s(e){return e.trim().replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(t)}).replace(A.escape,function(e){return A.MAP[e]})}function o(e,t,n){var r,s,o=I;return e!==k.elementOpen&&e!==k.elementVoid||(t&&t.hasOwnProperty(A.staticKey)?(r=a(t[A.staticKey]||i()),delete t[A.staticKey]):r=n?{value:k.getKey}:{value:"null"},s=Object.keys(t).length>0?", ":I,o=", "+r.value+s),o}function u(e,t){var n,r,o,u=I,l=!1,c=!1;if((e===k.elementOpen||e===k.elementVoid)&&Object.keys(t).length>0){t&&t.hasOwnProperty(A.staticArray)&&(l=t[A.staticArray]||i(),O[l]=O[l]||{},delete t[A.staticArray]),t&&t.hasOwnProperty(A.skipAttr)&&(c=!0,o=k.startSkipContent(a(t[A.skipAttr],!0).value),delete t[A.skipAttr]),u=l||null;for(var p in t)if(n=t[p],n=null===n?p:void 0===n?"":n,r=a(n),r.isStatic&&-1===A.nonStaticAttributes.indexOf(p))if(l){var d=s(n);O[l].hasOwnProperty(p)?O[l][p]!==d&&(O[l][p]=V,u+=S+p+'", "'+d+R):O[l][p]=d}else u+=S+p+'", "'+s(n)+R;else u+=S+p+'", '+s(r.value)}return{value:u,isSkipped:c,skip:o}}function l(e){var t,n,r={};for(var i in e){t=e[i],r[i]=[];for(n in t)t[n]!==V&&r[i].push(R+n+R,R+t[n]+R)}return r}function c(e){var t=["{"];for(var n in e)t.push((t.length>1?",":I)+"'"+n+"':"+a(e[n],!0).value);return t.push("}"),t.join(I)}function p(e){return e.replace(/\s/g,"").replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function d(e,t,n){if(n&&n.ref){var r=n.ref;delete n.ref}var i=o(e,n),s=u(e,n);r&&(e=k.saveRef(p(a(r,!0).value),e)),T.push(e+t+R+i+s.value+k.close),s.isSkipped&&(T.push(s.skip),P.skip.push(P.level))}function h(e){if(e=s(e),e.length>0){var t=a(e);T.push(k.text+t.value+k.close)}}function f(e,t){T.push(k.helpers+'["'+e+'"]('+c(t)+", function ("+A.parentParameterName+"){")}function v(){T.push("}.bind(this));")}function m(e){return-1!==N.indexOf(e)||-1!==w.indexOf(e)||0===e.indexOf(A.helperPre)}function g(e,t){var n=e.replace(A.binderPre,"");T.push(k.binder+"("+n+","+c(t)+", function ("+A.parentParameterName+"){")}function _(){T.push("}.bind(this));")}function y(e){return 0===e.indexOf(A.binderPre)}function b(e){var t=!0;if(E.tag){var n=r();m(E.tag)?(f(E.tag,E.attributes),t=e):y(E.tag)?(g(E.tag,E.attributes),t=e):e||-1!==A.voidRequireTags.indexOf(E.tag)?(d(k.elementVoid,E.tag,E.attributes,n),P.level--,t=!1):E.tag!==A.evaluate.name&&d(k.elementOpen,E.tag,E.attributes,n),P.level++}return E.tag=null,E.attributes={},t}function x(e){C=e,this.reset()}var E,T,C,w,A=n(1),D=n(4),k=n(6).Command,O={},N=[],I="",R='"',S=', "',V="-%%&&##__II-",P={level:0,skip:[]};x.prototype.reset=function(){T=[],E={tag:null,attributes:{}},O={},P={level:0,skip:[]}},x.prototype.set=function(e,t){w=e,N=t||[]},x.prototype.write=function(e){var t;switch(e.type){case D.Tag:t=e.name.replace("/",I),0===e.name.indexOf("/")?b(!0)&&t!==A.evaluate.name&&(P.level--,P.level===P.skip[P.skip.length-1]&&(T.push(k.endSkipContent),P.skip.pop()),m(t)?v():y(t)?_():d(k.elementClose,t)):(b(),E.tag=t,E.attributes={});break;case D.Attr:E.attributes[e.name]=e.data;break;case D.Text:t=E.tag,b(),t===A.evaluate.name?T.push(s(e.data)):h(e.data);break;case D.Comment:A.debug&&T.push("\n// "+e.data.replace(A.BREAK_LINE," ")+"\n")}},x.prototype.done=function(){return C(T,l(O))},e.exports=x},function(e,t,n){function r(){function e(e){var t=u+" return _r;",n="var TE=function(m,n,o){this.original=o;this.name=n;(o)?this.stack=this.original.stack:this.stack=null;this.message=o.message+m;};var CE=function(){};CE.prototype=Error.prototype;TE.prototype=new CE();TE.prototype.constructor=TE;";return i.debug?"try {"+e+"} catch (err) {"+n+"throw new TE("+JSON.stringify(s)+", err.name, err);}"+t:e+t}function t(t,a){var s,l=["var _o = _l.elementOpen;","var _c = _l.elementClose;","var _v = _l.elementVoid;","var _t = _l.text;","var _r = {};","_b = _b || function(fn, data, content){ return fn(data, content); };"].join(u)+u;for(var c in a)a.hasOwnProperty(c)&&(l+="var "+c+"=["+a[c]+"];");var p=l+e(t.join(o));return n?(p="return function("+i.parameterName+", "+i.renderContentFnName+", _b){"+p+"};",s=new Function("_l","_h",p)(n,r)):s=new Function(i.parameterName,"_l","_h",i.renderContentFnName,"_b",p),s}var n,r,a,s,o="",u="\n";return t.set=function(e,t,i,o){n=e,r=t,a=i,s=o},t}var i=n(1),a={helpers:"_h",binder:"_b",elementOpen:'_o("',elementClose:'_c("',elementVoid:'_v("',saveRef:function(e,t){return"_r["+e+"] = "+t},text:"_t(",close:");\n",startSkipContent:function(e){return e='"false"'===e?!1:e,e='"true"'===e?!0:e,"if("+e+"){_l.skip();}else{"},endSkipContent:"}"};e.exports={createWrapper:r,Command:a}}])})},function(e,t,n){"use strict";function r(e,t,r){var o=n(14);if(t=t||{},t.key=t.key||t.id,e instanceof o)return e.props.set(i.omit(t,s.ViewOptions),{silent:!0}),e.render();var u="view-key-"+t.key,l=a.get(u);if(l)return l.props.set(i.omit(t,s.ViewOptions),{silent:!0}),l.render();var c=i.isFunction(e)?new e(t,r):e;return c instanceof o?c.render():c}var i=n(1),a=n(13),s=n(9);e.exports=r},function(e,t,n){"use strict";function r(e){this.options=u,e.subscribe(s.REGISTER,this.register,this),e.subscribe(s.UNREGISTER,this.unregister,this)}var i=n(1),a=n(6),s=n(9).Events,o={},u={debug:!1,parameterName:"data",viewAttributes:{"data-role":"view"}};r.prototype.setOptions=function(e){i.extend(this.options,e)},r.prototype.get=function(e){return o[e]},r.prototype.getAll=function(){return i.clone(o)},r.prototype.register=function(e,t){if(o[e])throw new Error("Such module ID: "+e+" already registered");o[e]=t},r.prototype.unregister=function(e){o[e]&&delete o[e]},e.exports=new r(a)},function(e,t,n){"use strict";function r(){return!!l.currentElement()}function i(e){return e&&e.key?"view-key-"+e.key:o.result(e,"id",o.uniqueId("view-"))}function a(e){return"string"==typeof e?RAD.template(e):e}function s(e){return e.__incrementalDOMData&&e.__incrementalDOMData.key}var o=n(1),u=n(5),l=n(4),c=n(6),p=n(9),d=p.Events,h=n(13),f=h.options.viewAttributes,v=h.register,m=h.unregister,g=function(e){this.viewId=i(e),this.refs={};var t=this.propsModel||u.Model;this.props=new t(o.omit(e,p.ViewOptions)),this._bindChannels(),u.View.apply(this,arguments),this.template=a(this.template),this.bindRender(this.props,"change"),v(this.getID(),this)};g.prototype=o.create(u.View.prototype,{_bindChannels:function(){var e=this.getID(),t=e+":"+d.ATTACH,n=e+":"+d.DETACH;this.subscribe(e,this.onReceiveMsg,this),this.subscribe(t,this.onAttach,this),this.subscribe(n,this.onDetach,this),r()&&this.subscribe(n,this.destroy,this)},setElement:function(e){var t=e instanceof u.$?e:u.$(e),n=t.attr(p.Attributes.ID);if(n&&n!==this.getID())throw new Error("You cannot setElement which is used by another View.");u.View.prototype.setElement.call(this,t)},getID:function(){return this.viewId},getTemplateData:function(){return{collection:this.collection&&this.collection.toJSON(),model:this.model&&this.model.toJSON(),props:this.props.toJSON()}},bindRender:function(e,t){this.listenTo(e,t,this.render)},render:function(){return r()?this._render():this._renderOuter(),this},_renderOuter:function(){var e=this;return l.patchOuter(this.el,function(){s(e.el)?e._render():(e.el.setAttribute("key",e.getID()),e._render(),e.el.removeAttribute("key"))}),this},_render:function(){return this.onBeforeRender()===!1?this._skip():(this._viewElOpen(),this._renderTemplate(),this._viewElClose(),this.onRender(),this)},_renderTemplate:function(){"function"==typeof this.template?this.refs=this.template(this.getTemplateData()):l.skip()},_skip:function(){return this._viewElOpen(),l.skip(),this._viewElClose(),this},_viewElOpen:function(){l.elementOpenStart(this.el.tagName.toLowerCase(),this.getID()),this._setElAttributes(),l.elementOpenEnd()},_viewElClose:function(){var e=l.elementClose(this.el.tagName.toLowerCase());this.el!==e&&this.setElement(e)},_setElAttributes:function(){var e=o.extend({},f,o.result(this,"attributes",{}));e.id=o.result(this,"id"),e["class"]=o.result(this,"className"),e[p.Attributes.ID]=this.getID(),o.each(e,function(e,t){l.attr(t,e)})},_removeElement:function(){return this.$el.remove(),this.publish(d.NODE_REMOVED,this.el),this},destroy:function(){this.unsubscribe(null,null,this),m(this.getID()),this.remove(),this.onDestroy(),this.off(),this.undelegateEvents()},subscribe:function(e,t,n){return c.subscribe(e,t,n||this)},unsubscribe:function(e,t,n){return c.unsubscribe(e,t,n||this)},publish:function(){return c.publish.apply(c,arguments)}}),o.extend(g.prototype,{onReceiveMsg:function(){},onBeforeRender:function(){},onRender:function(){},onAttach:function(){},onDetach:function(){},onDestroy:function(){}}),g.extend=function(e,t){return u.View.extend.apply(this,arguments)},e.exports=g},function(e,t,n){"use strict";function r(e){return e[u]}function i(e,t){return e[l]||(e[l]={}),o.extend(e[l],t)}function a(e){return e[l]||i(e,{})}function s(e,t){return Array.prototype.slice.call(e,t||0)}var o=n(1),u="__incrementalDOMData",l="__renderData";e.exports={getNodeData:r,getRenderData:a,setRenderData:i,toArray:s}},function(e,t,n){"use strict";function r(e){var t=d.getNodeData(e).key,n=e.tagName.toLowerCase();m=!0,c.elementOpen.apply(null,[n,t,null].concat(d.getNodeData(e).attrsArr)),c.skip(),c.elementClose(n),m=!1}function i(e,t,n){for(var i=e.length,a=e[t];i>t&&a&&d.getNodeData(a).key!==n;)r(a),a=e[++t];return t}function a(e){function t(e,t){if(!m){var n=++o===u;l=!1,n&&(s[t]?r=i(a,r,t):l=!0,r++)}}function n(t,n){if(!m){var i=o===u,p=c.currentElement();i&&(e.keysRendered[n]=p),l&&(a.splice(r-1,0,p),s[n]=p,e.keysToShow[n]=p),e.position=r}}var r=e.position,a=e.children,s=e.keyMap,o=0,u=1,l=!1;c.events.on("elementOpen:before",t,e),c.events.on("elementOpen:after",n,e),c.events.on("elementClose:after",function(){m||o--},e);var p;c.events.on("elementOpenStart:before",function(e,n){m||(p=n,t(e,n))},e),c.events.on("elementOpenEnd:after",function(e,t){m||n(e,p)},e)}function s(e){c.events.off(null,null,e),i(e.children,e.position)}function o(e,t){var n=e.rootEl,r=d.getNodeData(n).keyMap,i=f(e.attrs),a=Array.prototype.slice.call(n.children);e.applyAnimation||(i.enterTimeout=i.leaveTimeout=0),u.each(a,function(n){var a=d.getNodeData(n).key,s=d.getRenderData(n);e.keysRendered[a]?(e.keysToShow[a]||s.status===v.LEAVE)&&s.status!==v.ENTER&&(s.status=v.ENTER,h.enter(n,i,function(){s.status=v.DONE},t)):s.status!==v.LEAVE&&(s.status=v.LEAVE,h.leave(n,i,function(){s.status=v.DONE,delete r[a],l(p.NODE_REMOVED,n,t)},t))})}var u=n(1),l=n(6).publish,c=n(4),p=n(9).Events,d=n(15),h=n(17),f=n(21),v={ENTER:"enter",LEAVE:"leave",DONE:"done"},m=!1;e.exports={start:a,stop:s,doTransition:o}},function(e,t,n){"use strict";function r(e){e.__transitionId&&(clearTimeout(e.__transitionId),e.__transitionId=null)}function i(e,t,n){e.__transitionId=setTimeout(function(){t(e)},n)}function a(e){return e.__transitionId&&e.stopActiveTransition}function s(e,t,n,a){function s(){e.stopActiveTransition(),a&&a(e)}function o(t){t.target===e&&s()}var u=new c(e),h=new l(e),f=[t.animationEnter,t.animationLeave,t.enterClass,t.leaveClass,t.activeClass].join(d);return e.stopActiveTransition=function(){r(e),u.unbindAll(),h.unbindAll(),p.removeClass(e,f)},u.bind(o),h.bind(o),n?(i(e,s,n),void p.addClass(e,t.activeClass)):s()}function o(e,t,n,r){a(e)&&e.stopActiveTransition(),p.addClass(e,[t.leaveClass].join(d)),p.removeClass(e,t.enterClass),r.push(function(){p.addClass(e,[t.animationLeave].join(d)),s(e,t,t.leaveTimeout,function(e){e.parentNode&&e.parentNode.removeChild(e),n&&n()})})}function u(e,t,n,r){a(e)&&e.stopActiveTransition(),p.addClass(e,[t.enterClass].join(d)),p.removeClass(e,t.leaveClass),r.push(function(){p.addClass(e,[t.animationEnter].join(d)),s(e,t,t.enterTimeout,n)})}var l=n(18),c=n(19),p=n(8),d=" ";e.exports.enter=u,e.exports.leave=o},function(e,t,n){"use strict";function r(e){i.call(this,e)}var i=n(19),a=n(20),s="__animationData";r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype._initData=function(){this.el[s]={eventName:a({animation:"animationend",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"}),callbacks:[]}},r.prototype._getData=function(){return this.el[s]},e.exports=r},function(e,t,n){"use strict";function r(e){if(this.el=e&&(e[0]||e),!(this.el instanceof HTMLElement))throw new Error("HTMLElement must be passed as an argument");this._getData()||this._initData()}var i=n(20),a="__transitionData";r.prototype._initData=function(){this.el[a]={eventName:i({transition:"transitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"}),callbacks:[]}},r.prototype._getData=function(){return this.el[a]},r.prototype.bind=function(e){var t=this._getData();-1===t.callbacks.indexOf(e)&&(t.callbacks.push(e),this.el.addEventListener(t.eventName,e,!1))},r.prototype.unbind=function(e){var t=this._getData(),n=t.callbacks.indexOf(e);-1!==n&&(t.callbacks.splice(n,1),this.el.removeEventListener(t.eventName,e,!1))},r.prototype.unbindAll=function(){this._getData().callbacks.forEach(this.unbind,this)},e.exports=r},function(e,t){"use strict";e.exports=function(e){var t,n=document.createElement("xelement");for(t in e)if(void 0!==n.style[t])return e[t]}},function(e,t){"use strict";var n="leave",r="enter",i="animated",a=3500;e.exports=function(e){var t=parseInt(e.enterTimeout,10),s=parseInt(e.leaveTimeout,10),o=e.name||e.animationName;return{animationEnter:e.animationEnter||o,animationLeave:e.animationLeave||o,initialAnimation:e.initialAnimation,enterClass:e.enterClass||r,leaveClass:e.leaveClass||n,enterTimeout:isNaN(t)?a:t,leaveTimeout:isNaN(s)?a:s,activeClass:e.activeClass||i}}},function(e,t){function n(e){this.name=e,this.callbacks=[]}n.prototype.push=function(e){this.callbacks.push(e)},n.prototype.execute=function(){for(var e=this.callbacks.length-1;e>=0;e--)this.callbacks.pop()()};var r={runners:{},create:function(e){var t;e&&e.hasOwnProperty("delay")&&(t=parseInt(e.delay,10)||0);var r="name_"+Math.random().toString(16).slice(2);
e&&e.hasOwnProperty("groupName")&&(r=e.groupName),this.runners.hasOwnProperty(r)||(this.runners[r]=[]);var i=new n(r);return this.runners[r].push(i),this.runners[r].delay=t,i},run:function(e){function t(){for(var e=n.length-1;e>=0;e--)n.pop().execute()}var n=this.runners[e];if(n){var r=this.runners[e].delay;void 0!==r?setTimeout(t,r):t(),this.runners[e]=[]}}};e.exports=r},function(e,t,n){"use strict";var r=n(1),i=n(24),a=n(9).Events,s=n(9).Attributes,o=i.extend({activePatches:[],initialize:function(){this.subscribe(a.PATCH_START,this.onPatchStart,this),this.subscribe(a.PATCH_END,this.onPatchEnd,this),this.subscribe(a.NODE_REMOVED,this.onNodeRemove,this)},onNodeRemove:function(e){var t=this.getChildIDs(e);this.activeViews&&(t=t.filter(function(e){return this.activeViews.indexOf(e)<0},this)),e.hasAttribute(s.ID)&&t.unshift(e.getAttribute(s.ID)),this.publishEvent(t,a.DETACH)},isOnPage:function(e){return document.body.contains(e)},onPatchStart:function(e){if(this.isOnPage(e)){var t=this.getChildIDs(e);e.hasAttribute(s.ID)&&t.unshift(e.getAttribute(s.ID)),this.activePatches.push({node:e,views:t})}},onPatchEnd:function(e){if(this.isOnPage(e)){var t=this.activePatches.pop();if(t.node!==e)throw new Error("Wrong patch order");this.refreshLayout(t)}},getChildIDs:function(e){var t=e.querySelectorAll("["+s.ID+"]"),n=[],r=0;for(r;r<t.length;r++)n[r]=t[r].getAttribute(s.ID);return n},refreshLayout:function(e){var t=e.node,n=e.views,i=this.getChildIDs(t);t.hasAttribute(s.ID)&&i.unshift(t.getAttribute(s.ID)),this.activeViews=i;var o=r.difference(n,i);this.publishEvent(o,a.DETACH);var u=r.difference(i,n);this.publishEvent(u,a.ATTACH),this.activeViews=null},publishEvent:function(e,t){e.forEach(function(e){this.publish(e+":"+t)},this)}});e.exports=new o},function(e,t,n){"use strict";function r(e){this.cid=i.uniqueId("module"),i.extend(this,i.pick(e,o)),this.id=i.result(this,"id",this.cid),this.initialize.apply(this,arguments),this.channel&&this.subscribe(this.channel,this.onReceiveMsg,this)}var i=n(1),a=n(5),s=n(6),o=["channel","id"];i.extend(r.prototype,s,{initialize:function(){},onReceiveMsg:function(){},destroy:function(){this.unsubscribe(null,null,this)}}),r.extend=a.View.extend,e.exports=r},function(e,t,n){"use strict";var r=n(1),i=n(13),a=n(24),s=n(4),o=n(12),u=a.extend({initialize:function(){this.subscribe("navigation:show",this.navigateView,this),this.subscribe("navigation:back",this.navigateBack,this),this.subscribe("navigation.show",this.navigateView,this),this.subscribe("navigation.back",this.navigateBack,this)},navigateView:function(e){e=e||{};var t=this.getEl(e.container);if(!t)throw new Error("Cannot find container el: "+e.container);this.patchContainer(t,this.getContent(e.content),e.options)},navigateBack:function(e){e.direction="back",this.navigateView(e)},getEl:function(e){return r.isString(e)?document.querySelector(e):e},patchContainer:function(e,t,n){s.patch(e,function(){t&&o(t,n)})},getContent:function(e){return r.isString(e)?i.get(e):e}});e.exports=new u},function(e,t,n){"use strict";e.exports.template=n(10),e.exports.IncrementalDOM=n(4),e.exports.TransitionEnd=n(19),e.exports.AnimationEnd=n(18),e.exports.DOM=n(8),e.exports.ITemplate=n(11),e.exports.binder=n(12)}])});
//# sourceMappingURL=rad.min.js.map